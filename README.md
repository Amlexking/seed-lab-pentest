# seed-lab-pentest
step to hack into seedlabs server by using SYN flooding 
Now that the explanation is out of the way, I will perform the attack with and without the SYN cookies countermeasure enabled
I will use telnet (which communicates using TCP) on the User machine both before and after performing the TCP SYN flooding attack. The User machine should be able to connect fine before the attack, but will be unable to connect while the attack is happening if it is successful.
I will first perform the attack without the SYN cookies countermeasure enabled. On the Server machine I check whether or not it is enabled by running ‘sudo sysctl -a | grep cookie’ in the terminal:
The green highlighted part is the output: ‘net.ipv4.tcp_syncookies = 1’. Because it is set to 1, the SYN cookies countermeasure is turned on.
I need to turn it off for this part of the task. I do this by running ‘sudo sysctl -w net.ipv4.tcp_syncookies=0’ in the terminal on the Server machine
On the User machine, I connect to the Server machine using Telnet. I do this by running ‘telnet server ip’ (note that you should use the IP address of your Server machine, which may be different from mine) and logging in with username: seed and password: dees:
You can see that once I am logged in to the Server machine from the User machine, the prompt changes from User to Server . This means that the 3-way handshake was successful, and a TCP connection between User and Server has been established.
Now on the Server machine I run ‘netstat -tna’ to check the usage of the TCB queue for TCP connections
All of the ports are in a LISTEN state except for one that is in an ESTABLISHED state (this is the telnet connection from User to Server). A half-opened connection would show up as a SYN_RECV state. Normally, there will be very few, if any, half-opened connections at any given time that you run the netstat command.
Now, it’s time to perform the attack. The Netwox tool suite contains a tool for performing SYN flooding attacks. This is tool number 76. To use this tool I need the destination IP address and the destination port number.
The destination IP address is the Server machine’s IP address . The port number is going to be 23 because that is the port number for Telnet connections. I also want each packet to have spoofed IP addresses, so I will use the ‘-s raw’ flag with the tool.
On the attacker machine, I run ‘sudo netwox 76 -i server ip -p server port -s raw’
On the Server machine, I run ‘netstat -tna’ again:
There is now a massive list of port 23 TCP half opened connections (SYN_RECV). It looks as though the attack has been successful. You can see that all of those half-opened connections have random Foreign Addresses, this is because they are all spoofed.
I will check the User machine to see if I can still connect to the server through TelnetUser machine telnet connection
The Telnet connection that I already established before the attack was still working fine. I exited out of that connection and tried to start a new connection:
It attempts to establish a new connection. After a while it times out. The TCP SYN flooding attack was successful.
I will now try the attack again, but I will turn the SYN cookies countermeasure on.
First, I stop the SYN flooding attack on the Attacker machine by entering CTRL+C in the terminal
CTRL+C on Attacker machine's terminal
Now on the Server machine I run ‘sudo sysctl -w net.ipv4.tcp_syncookies=1’ to turn on SYN cookies
I will connect to the Server machine again from the User machine using Telnet just like before
I run ‘netstat -tna’ on the Server machine
Everything looks normal.
From the Attacker machine I run ‘sudo netwox 76 -i server ip -p server port -s raw’ to start the attack again
Now I run ‘netstat -tna’ on server again to see if the TCB queue is filled with SYN_RECV half-opened connections again.
I will check to see if I can start a new Telnet connection to the Server machine from the User machine.
First, I exit out of the existing Telnet connection and then attempt to start a new one
I am able to successfully connect to the Server machine through Telnet. This means that the SYN cookies countermeasure worked.
It is a bit odd that there were still so many SYN_RECV States in the netstat list, but I guess that the Server machine didn’t actually allocate resources so the TCB queue didn’t fill up. If you have any more insight into this, let me know it the comment section.
